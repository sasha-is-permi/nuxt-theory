<!-- 
Nuxt.js
Понадобится Visual studio code и плагин Vetur для проверки.

https://nuxtjs.org

Расширяет возможности vue.js .
Из коробки предоставляет возможности сервер-сайт рендеринга.

https://nuxtjs.org/guide/installation

В visual studio code:

1) Установить create-nuxt-app
npm i -g create-nuxt-app

Перейти в папку с проектами.
/* на сайте рекомендуется:
npm init nuxt-app <project-name>
*/

create-nuxt-app nuxt-theory

Project name, description- просто enter

Use a custom server framework: 
Может использовать разные сервера- например, express.
Если пишем none- nuxt.js   использует собственный сервер.

Choose features to install 
Дополнительные модули. Пока ничего не выбираем. 

Use a custom UI fraimwork -
выбираем bootstrap, vuetify или none. 
Выберем none. 

Тестовый фреймворк: выберем none.
Choose rendering mode
> Universal (выберем)Servise set rendering будет работать
SPA (для обычного динамического сайта)

Author Enter

Packet meneger: npm

Запускаем проект: npm run dev
На localhost:3000 
доступен проект. 

В package.json:

В зависимости- nuxt
Нет vue, vue-router, vuex - они входят в ядро nuxt


dev - для разработки приложения

build- создание итогового production- приложения


  To get started:

        cd nuxt-theory
        npm run dev

  To build & start for production:

        cd nuxt-theory
        npm run build
        npm run start


  start- запускает build-версию, чтобы она работала. 
  
  Для работы ssr (если его выбрали)
  нужно чтобы был запущен и сервер и клиент. 
  build start это и делает. 

  generate- генерирует статические страницы в build если используем spa

  2. Структура приложения. 

  Папки:

  Структура папок важна.
  
  nuxt- служебная информация. 
  
  assets-   sass или js некомпилированные файлы там будут 
  
  components- обычные компоненты на vue.js 

   Layout: 
   компоненты первоочередные.

  nuxt- куда рендерить страницу.
  Похоже на router технологию vue 

  middleware- рассмотрим в отдельном уроке. 

pages:  
Как главная страница
index.vue

Импортируем для неё из components/about.vue 
import Logo '@/components/Logo.vue'
или
import Logo '~/components/Logo.vue'

@ или ~ - импорт из корня папки. 

node_modules - дополнительные модули

plugins - плагины


static- статические файлы типа favicon.ico и т.п
картинки

store- тут будем организовывать хранение данных vuex

nuxt.config.js 

Сначала загружаем файл package.json (require),
 далее экспортируем js-объект, у которого есть набор конфигураций. 

 mode: 'universal' - используем ssr. 
 head: фактически index.html тут

 


<template>
  <div>
    <Nuxt />
  </div>
</template>

Респозиторий:
https://github.com/sasha-is-permi/nuxt-theory


// надо представиться если не представлялись. Один раз после создания проекта
// Информация записывается в .git/config
git init // создает git/config
git config --local user.name "Alexandr"         - имя пользователя для проекта
git config --local user.email sasha-is-permi@mail.ru         - e-mail


// После создания или изменения файлов в проекте
git add -A
git commit -m "first commit"

// Только первый раз при создании.
// Информация записывается в .git/config
git remote add origin https://github.com/sasha-is-permi/nuxt-theory
// Посылаем файлы проекта на github
// В следующий раз можно посылать файлы более простой командой:
// git push
git push -u origin master


loading- отвечает за загрузку страниц (для серверной загрузки)

build - изменяем build-конфигурацию.

Расширяем функционал webpack (клиентская сторона построенна на webpack)

3. Создание разметки приложения. 

Установим bootstrap 

npm install bootstrap 

В nuxt.config.js прописать если нет: 

css: [
 '@/node_modules/bootstrap/dist/css/bootstrap.min.css'
]



pages: index.vue 
Убираем лишнее. 

layout: 
(сначала идет layout, затем страницы)

Тоже очищаем.

 <template>
  <div class="container">
    <Nuxt />
  </div>
</template>

<style>

</style>



Создаем новый компонент navbar.vue. 

После скачивания на другой компьютер 
(git clone:
git init
git name
git email
npm install
npm run dev
)

2.4 Статические роуты.

navbar.vue: 
обеспечивает переход по страничкам

<nav class="navbar navbar-expand-sm bg-light">


  <ul class="navbar-nav">
    <li class="nav-item">
      <nuxt-link class="nav-link" to="/">Home</nuxt-link>
    </li>
    <li class="nav-item">
       <nuxt-link class="nav-link" to="/users">Users</nuxt-link>
    </li>
    <li class="nav-item">
      <nuxt-link class="nav-link" to="/about">About</nuxt-link>
    </li>
  </ul>

</nav>
1)
Роуты создаем по другому чем во vue.
Создаем файлы в определенной структуре. 

Если нет ничего в адресной строке (home page):
nuxt загружает index.vue
Это главная страница. 

В папке pages создаем users.vue. 
Это обычный vue-компонент. 

В этом файле:
<template>
  <section>
     <h1> Users page </h1>
  </section>
</template> 

Этого достаточно чтобы появилась страница
localhost:3000/users

2) Нужно создать страничку About в папке pages. 
Создаем папку About, в ней index.vue

Подключить sass-предпроцессор:
npm install --save-dev sass sass-loader 
(или при установке проекта)

(для vue:
npm i node-sass sass-loader)

Можно использовать:
<style lang="scss" scoped>
h1 {
  text-align:center;
}

</style>

В navbar.vue: 

<nuxt-link> 
по анологии с <vue-link>
- делает так чтобы страничка не перезагружалась при переходе по ссылке. 

Вместо <a href=""> используем <nuxt-link to="">

Теперь переходим в динамическом режиме как в SPA

5. Динамические роуты и валидация. 

Можем использовать 

data () {
return {}
}

Но можем использовать и стрелочную функцию:

  data: () => ({
    users: [
      1, 2, 3, 4, 5
    ]
  })

В users.vue: 

<template>
  <section>
    <h1>Users page</h1>
    <div class="menu">
    <ul>

      Выводим список из элементов массива 
      <li v-for="user of users" :key="user">
        При клике переходим без перезагрузки страницы на другую 
        страничку- с User (goTO(user)- метод, описанный ниже)
        <a href="#" @click.prevent="goTo(user)">User {{user}}</a>
      </li>
    </ul>
    </div>
  </section>
</template>

<script>
export default {
  data: () => ({
    users: [
      1, 2, 3, 4, 5
    ]
  }),
  methods: {
    // Программная (динамическая) навигация.
    // программно определяем что нужно переходить на страничку
    // users/1
    goTo(user) {
      this.$router.push('/users/' + user)
    }
  }
}
</script>

<style lang="scss" scoped>
h1 {
  text-align:center;
}

.menu{
  display:flex;
  justify-content:center;
}

</style>

Чтобы создать еще страничку, на которую переходить-
в папке Users должен быть файл _id.vue :

<template>
  <h1>User with id {{$route.params.id}}</h1>
</template>

<script>
export default {
  validate({params}) {
    return /^\d+$/.test(params.id)
  }
}
</script>


Это будет шаблон странички, 
на которую можно переходить. 

Этот файл является роутом, который откликается на динамический параметр
(user.id)

nuxt будет передавать во vue router параметр id. 

{{$route.params.id}} - это число, приходящее из users.vue, 
массив user, текущий user (пункт меню, соотваетствующий текущему user)

validate- метод, которым nuxt расширяет instanse vue: 
регулярное выражение- должны быть только числа. 
Применяем его (test) к params.id -значение переданной страницы
params- объект типа {id:2}

  validate({params}) {
    return /^\d+$/.test(params.id)
  }

{params} - достаем поле с параметрами из контекста.

Валидируем (проверяем) заход на данную страничку. 



-->